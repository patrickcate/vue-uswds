import{K,w as C,s as p,l as M,M as P,y as T,z as J,c as D,a as N,G as S,H as z,b as Q,o as x,n as W,j as d,k as u,v as X}from"./vue.esm-bundler-d9807bdf.js";import{u as Z}from"./useFocusTrap-6eaffc8c.js";import{p as v,l as E,m as V,n as ee,o as te,q as ae,b as ne}from"./dates-8ec2f460.js";import{s as se}from"./common-c0b90c12.js";const G=({activeYear:w,monthLabels:O,minDate:h,maxDate:l})=>{const y=K(v(h.value)),g=K(v(l.value));C(h,t=>y.value=v(t)),C(l,t=>g.value=v(t));const Y=p(()=>{const t=v(`${w.value}-01-01`),e=E(t);return V([e,y.value]).getMonth()}),$=p(()=>{const t=v(`${w.value}-01-01`),e=E(t),n=ee(e);return te([n,g.value]).getMonth()}),b=p(()=>{const t=[];for(let e=Y.value;e<=$.value;e++)t.push(e+1);return t}),r=t=>b.value.includes(t),A=(t,e)=>{for(let n=t;n<=e;n++)if(r(n))return n;return null},k=(t,e)=>{for(let n=t;n>=e;n--)if(r(n))return n;return null},U=p(()=>Object.keys(O.value).map(t=>parseInt(t,10)+1)),j=p(()=>se(U.value,3));return{months:p(()=>j.value.map(t=>t.map((e,n)=>({month:e,label:O.value[e-1],id:`${e}-${n}`,disabled:!r(e),left:r(e-1)?e-1:null,right:r(e+1)?e+1:null,up:r(e-3)?e-3:r(e-1)?e-1:null,down:r(e+3)?e+3:r(e+1)?e+1:null,home:t.find(i=>r(i))||null,end:[...t].reverse().find(i=>r(i))||null,pageUp:A(1,e),pageDown:k(12,e)})))),findRowIndexByMonth:(t,e)=>t.value.findIndex(i=>i.find(({month:_})=>_===e)),findButtonIndexByMonth:(t,e,n)=>t.value[e].findIndex(({month:_})=>_===n)}};G.__docgenInfo={exportName:"useMonthPicker",displayName:"useMonthPicker",type:2,props:[{name:"activeYear",global:!1,description:"",tags:[],required:!0,type:"any",declarations:[],schema:"any"},{name:"monthLabels",global:!1,description:"",tags:[],required:!0,type:"any",declarations:[],schema:"any"},{name:"minDate",global:!1,description:"",tags:[],required:!0,type:"any",declarations:[],schema:"any"},{name:"maxDate",global:!1,description:"",tags:[],required:!0,type:"any",declarations:[],schema:"any"}],events:[],slots:[],exposed:[],sourceFiles:"/home/runner/work/vue-uswds/vue-uswds/src/components/UsaDatePickerCalendarMonth/useMonthPicker.js"};const re={class:"usa-date-picker__calendar__table",role:"presentation"},oe=["disabled","tabindex","data-value","data-label","aria-selected","onClick","onMouseover","onKeydown"],H={__name:"UsaDatePickerCalendarMonth",props:{activeDate:{type:String,required:!0},monthLabels:{type:Array,required:!0},minDate:{type:String,required:!0},maxDate:{type:String,required:!0}},emits:["update:activeMonth","update:selectorMode"],setup(w,{emit:O}){const h=O,l=w,y=M(null),g=M([]),{activate:Y,deactivate:$}=Z(y,{immediate:!0,clickOutsideDeactivates:!0,initialFocus:".usa-date-picker__calendar__month--focused",fallbackFocus:".usa-date-picker__calendar__date-picker"}),b=K(v(l.activeDate));C(P(l,"activeDate"),a=>b.value=v(a));const r=p(()=>ae(b.value)),A=p(()=>ne(b.value)),{months:k,findRowIndexByMonth:U,findButtonIndexByMonth:j}=G({activeYear:A,monthLabels:P(l,"monthLabels"),minDate:P(l,"minDate"),maxDate:P(l,"maxDate")}),m=M(r.value),B=M(null),I=M(null),t=(a,o,f)=>a===m.value||a===r.value||B.value===o&&I.value===f?0:-1,e=a=>g.value.find(o=>parseInt(o.dataset.value,10)===a),n=a=>{const o=e(a);o&&o.focus()},i=a=>{h("update:activeMonth",a),h("update:selectorMode","day")},_=a=>{m.value=a,n(m.value)},q=a=>{a&&(m.value=a,n(a))},R=a=>{a&&(m.value=a,n(a))};return C(m,a=>{const o=U(k,a),f=j(k,o,a);B.value=o,I.value=f},{immediate:!0}),T(()=>{Y()}),J(()=>{$()}),(a,o)=>(x(),D("div",{ref_key:"monthDatePickerRef",ref:y,tabindex:"-1",class:"usa-date-picker__calendar__month-picker"},[N("table",re,[N("tbody",null,[(x(!0),D(S,null,z(Q(k),(f,F)=>(x(),D("tr",{key:`${F}-${f.map(({month:s})=>s).join("-")}`},[(x(!0),D(S,null,z(f,(s,L)=>(x(),D("td",{key:s.id},[N("button",{ref_for:!0,ref_key:"monthButtonRefs",ref:g,type:"button",disabled:s.disabled,tabindex:t(s.month,F,L),class:W(["usa-date-picker__calendar__month",{"usa-date-picker__calendar__month--selected":r.value===s.month,"usa-date-picker__calendar__month--focused":B.value===F&&I.value===L}]),"data-value":s.month,"data-label":s.label,"aria-selected":r.value===s.month,onClick:c=>i(s.month),onMouseover:c=>_(s.month),onKeydown:[d(u(c=>q(s.up),["prevent"]),["up"]),d(u(c=>R(s.down),["prevent"]),["down"]),d(u(c=>q(s.left),["prevent"]),["left"]),d(u(c=>R(s.right),["prevent"]),["right"]),d(u(c=>q(s.home),["prevent"]),["home"]),d(u(c=>R(s.end),["prevent"]),["end"]),d(u(c=>q(s.pageUp),["prevent"]),["page-up"]),d(u(c=>R(s.pageDown),["prevent"]),["page-down"])]},X(s.label),43,oe)]))),128))]))),128))])])],512))}},ue=H;H.__docgenInfo={exportName:"default",displayName:"UsaDatePickerCalendarMonth",type:1,props:[{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void"}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"minDate",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"},{name:"maxDate",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"},{name:"monthLabels",global:!1,description:"",tags:[],required:!0,type:"unknown[]",declarations:[],schema:{kind:"array",type:"unknown[]"}},{name:"activeDate",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"}],events:[],slots:[],exposed:[{name:"minDate",type:"string",description:"",declarations:[],schema:"string"},{name:"maxDate",type:"string",description:"",declarations:[],schema:"string"},{name:"monthLabels",type:"unknown[]",description:"",declarations:[],schema:{kind:"array",type:"unknown[]"}},{name:"activeDate",type:"string",description:"",declarations:[],schema:"string"}],sourceFiles:"/home/runner/work/vue-uswds/vue-uswds/src/components/UsaDatePickerCalendarMonth/UsaDatePickerCalendarMonth.vue"};export{ue as U};
