import{s as l,l as N,K as H,w as S,M as j,z as ee,f as ae,g as te,b as O,o as U,a as o,c as V,G as X,H as J,j as b,n as ne,k as y,v as re,X as Q}from"./vue.esm-bundler-DlC1_45x.js";import{U as se}from"./component-CMK7bAJ2.js";import{Y as B}from"./constants-BA52rpFi.js";import{b as G,p as M,s as le}from"./dates-qO0ZlDc-.js";import{s as ie}from"./common-cfad2wKl.js";const oe=({minDate:w,maxDate:E,activeYear:u})=>{const _=l(()=>G(M(w.value))),K=l(()=>G(M(E.value))),s=t=>t>=_.value&&t<=K.value,Y=(t,a)=>{for(let r=t;r<=a;r++)if(s(r))return r;return null},d=(t,a)=>{for(let r=t;r>=a;r--)if(s(r))return r;return null},f=l(()=>Math.max(0,u.value-u.value%B)),c=l(()=>{const t=[];let a=f.value;for(;t.length<B;)t.push(a),a+=1;return t}),D=l(()=>ie(c.value,3)),I=l(()=>D.value.map(t=>t.map((a,r)=>({year:a,id:`${a}-${r}`,disabled:!s(a),left:s(a-1)?a-1:null,right:s(a+1)?a+1:null,up:s(a-3)?a-3:null,down:s(a+3)?a+3:null,home:t.find(p=>s(p))||null,end:[...t].reverse().find(p=>s(p))||null,pageUp:Y(a-B,a),pageDown:d(a+B,a)})))),R=l(()=>c.value[0]),q=l(()=>c.value[c.value.length-1]),T=l(()=>s(R.value-1)),A=l(()=>s(q.value+1)),C=l(()=>Y(R.value,q.value)),h=l(()=>d(q.value,R.value));return{years:I,visibleYearRange:c,firstAvailableVisibleYear:C,lastAvailableVisibleYear:h,isYearAvailable:t=>t>=C.value&&t<=h.value,hasPastYear:T,hasFutureYear:A,findRowIndexByYear:(t,a)=>t.value.findIndex(p=>p.find(({year:x})=>x===a)),findButtonIndexByYear:(t,a,r)=>t.value[a].findIndex(({year:x})=>x===r)}},ue={tabindex:"-1",class:"usa-date-picker__calendar__year-picker"},de={class:"usa-date-picker__calendar__table"},ce=["aria-label","disabled"],pe={colspan:"3"},ve={class:"usa-date-picker__calendar__table",role:"presentation"},me=["disabled","tabindex","data-value","aria-selected","onClick","onMouseover","onKeydown"],fe=["aria-label","disabled"],ge={__name:"UsaDatePickerCalendarYear",props:{selectedYear:{type:Number,required:!0},activeDate:{type:String,required:!0},minDate:{type:String,required:!0},maxDate:{type:String,required:!0},previousYearsButtonLabel:{type:String,required:!0},nextYearsButtonLabel:{type:String,required:!0}},emits:["update:selectedYear","update:selectorMode","update:activeYearStart","update:activeYearEnd"],setup(w,{emit:E}){const u=E,_=w,K={immediate:!0,clickOutsideDeactivates:!0,initialFocus:".usa-date-picker__calendar__year--focused",fallbackFocus:".usa-date-picker__calendar__date-picker"},s=N([]),Y=H(M(_.activeDate));S(j(_,"activeDate"),e=>Y.value=M(e));const d=l({get(){return G(Y.value)},set(e){Y.value=le(Y.value,e)}}),{years:f,visibleYearRange:c,firstAvailableVisibleYear:D,lastAvailableVisibleYear:I,isYearAvailable:R,hasPastYear:q,hasFutureYear:T,findRowIndexByYear:A,findButtonIndexByYear:C}=oe({minDate:j(_,"minDate"),maxDate:j(_,"maxDate"),activeYear:d});S(D,()=>u("update:activeYearStart",D.value),{immediate:!0}),S(I,()=>u("update:activeYearEnd",I.value),{immediate:!0});const h=l({get(){return _.selectedYear},set(e){u("update:selectedYear",e)}}),g=N(d.value),P=N(null),$=N(null),t=(e,i,v)=>e===g.value||e===h.value||P.value===i&&$.value===v?0:-1,a=e=>s.value.find(i=>parseInt(i.dataset.value,10)===e),r=e=>{const i=a(e);i&&i.focus()},p=()=>{d.value=d.value-B},x=()=>{d.value=d.value+B},W=e=>{h.value=e,u("update:selectorMode","day")},Z=e=>{g.value=e,r(g.value)},F=e=>{e&&(c.value.includes(e)||p(),Q(()=>{g.value=e,r(e)}))},L=e=>{e&&(c.value.includes(e)||x(),Q(()=>{g.value=e,r(e)}))};return S(g,e=>{if(c.value.includes(e)&&R(e)){const i=A(f,e),v=C(f,i,e);P.value=i,$.value=v}},{immediate:!0}),S(f,(e,i)=>{if(e[P.value][$.value].disabled){const v=e[0][0].year<i[0][0].year?D.value:I.value,k=A(f,v);if(k===-1)return;const n=C(f,k,v);g.value=e[k][n].year}}),ee(()=>{u("update:activeYearStart",""),u("update:activeYearEnd","")}),(e,i)=>(U(),ae(O(se),{options:K},{default:te(()=>[o("div",ue,[o("table",de,[o("tbody",null,[o("tr",null,[o("td",null,[o("button",{type:"button",class:"usa-date-picker__calendar__previous-year-chunk","aria-label":w.previousYearsButtonLabel,disabled:!O(q),onClick:p}," ",8,ce)]),o("td",pe,[o("table",ve,[o("tbody",null,[(U(!0),V(X,null,J(O(f),(v,k)=>(U(),V("tr",{key:`${k}-${v.map(({year:n})=>n).join("-")}`},[(U(!0),V(X,null,J(v,(n,z)=>(U(),V("td",{key:n.id},[o("button",{ref_for:!0,ref_key:"yearButtonRefs",ref:s,type:"button",disabled:n.disabled,tabindex:t(n.year,k,z),class:ne(["usa-date-picker__calendar__year",{"usa-date-picker__calendar__year--selected":h.value===n.year,"usa-date-picker__calendar__year--focused":P.value===k&&$.value===z}]),"data-value":n.year,"aria-selected":h.value===n.year,onClick:m=>W(n.year),onMouseover:m=>Z(n.year),onKeydown:[b(y(m=>F(n.up),["prevent"]),["up"]),b(y(m=>L(n.down),["prevent"]),["down"]),b(y(m=>F(n.left),["prevent"]),["left"]),b(y(m=>L(n.right),["prevent"]),["right"]),b(y(m=>F(n.home),["prevent"]),["home"]),b(y(m=>L(n.end),["prevent"]),["end"]),b(y(m=>F(n.pageUp),["prevent"]),["page-up"]),b(y(m=>L(n.pageDown),["prevent"]),["page-down"])]},re(n.year),43,me)]))),128))]))),128))])])]),o("td",null,[o("button",{type:"button",class:"usa-date-picker__calendar__next-year-chunk","aria-label":w.nextYearsButtonLabel,disabled:!O(T),onClick:x}," ",8,fe)])])])])])]),_:1}))}};ge.__docgenInfo={exportName:"default",displayName:"UsaDatePickerCalendarYear",type:1,props:[{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void"}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"minDate",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"},{name:"maxDate",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"},{name:"previousYearsButtonLabel",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"},{name:"nextYearsButtonLabel",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"},{name:"activeDate",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"},{name:"selectedYear",global:!1,description:"",tags:[],required:!0,type:"number",declarations:[],schema:"number"}],events:[],slots:[],exposed:[{name:"minDate",type:"string",description:"",declarations:[],schema:"string"},{name:"maxDate",type:"string",description:"",declarations:[],schema:"string"},{name:"previousYearsButtonLabel",type:"string",description:"",declarations:[],schema:"string"},{name:"nextYearsButtonLabel",type:"string",description:"",declarations:[],schema:"string"},{name:"activeDate",type:"string",description:"",declarations:[],schema:"string"},{name:"selectedYear",type:"number",description:"",declarations:[],schema:"number"}],sourceFiles:"/home/runner/work/vue-uswds/vue-uswds/src/components/UsaDatePickerCalendarYear/UsaDatePickerCalendarYear.vue"};export{ge as _};
