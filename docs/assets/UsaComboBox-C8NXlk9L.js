import{l as b,s as i,w as be,x as se,X as z,u as Ve,N as G,f as ye,g as ge,n as W,b as t,o as w,t as ne,c as T,a as O,r as N,d as X,v as le,B as he,m as De,j,k as F,Y as Se,D as Ae,R as He,H as fe,I as Ne}from"./vue.esm-bundler-DsKf3Hbt.js";import{d as je,a as Fe,o as Ke}from"./index-BIJogqLd.js";import{n as Ue}from"./unique-id-ZGF68Crf.js";import{e as Me}from"./common-cfad2wKl.js";import{_ as Pe}from"./UsaFormGroup-Byzm6HH0.js";import{_ as ze}from"./UsaLabel-qQK9qPDl.js";function Ge(d,oe,Y,ie,m,re){const ue=b(d),V=b(Y),D=b(ie),S=b(m),l=i({get(){return oe.value},set(e){re("update:modelValue",e)}}),J=je(),_=b(!1),u=b(""),r=b(""),v=b(!1),C=i(()=>{if(l.value==="")return"";const e=V.value.find(a=>a.value===l.value);return(e==null?void 0:e.label)||""});be(C,e=>{e!==""&&(u.value=e)}),be(u,e=>{v.value&&e!==""&&(_.value=!0)}),C.value&&(u.value=C.value);const f=i(()=>u.value===""||!_.value&&u.value===C.value?V.value:V.value.filter(e=>new RegExp(Me(u.value),"gi").test(e.label))),L=i(()=>{var e;return(e=f.value)==null?void 0:e.length}),g=i(()=>ue.value||Ue("usa-combo-box")),de=i(()=>`${g.value}-label`),Q=i(()=>`${g.value}-error-message`),ce=i(()=>`${g.value}-hint`),Z=i(()=>`${g.value}-assistive-hint`),ee=i(()=>`${g.value}-list`),K=e=>`${ee.value}-option-${e}`,te=b(null),ae=b(null),p=b(null),B=b([]),U=e=>B.value.find(a=>a.id===e),A=e=>B.value.find(a=>a.dataset.value===e),$=i(()=>L.value?f.value[0].value:""),pe=i(()=>{const e=L.value?B.value[0].id:null;return e?U(e):null}),H=i(()=>{if(l.value==="")return null;const e=B.value.find(a=>a.dataset.value===l.value);return e||null}),h=i(()=>{if(r.value==="")return null;const e=B.value.find(a=>a.dataset.value===r.value);return e||null}),M=i(()=>f.value.findIndex(a=>a.value===r.value)===0),P=i(()=>f.value.findIndex(a=>a.value===r.value)===L.value-1),me=i(()=>{const e=J.value.id;return e===q.value||L.value&&l.value!==""&&v.value&&e===g.value?q.value:null}),k=e=>{if(!e||!(p!=null&&p.value))return;const a=e.offsetTop+e.offsetHeight,ve=p.value.scrollTop+p.value.offsetHeight;a>ve&&(p.value.scrollTop=a-p.value.offsetHeight),e.offsetTop<p.value.scrollTop&&(p.value.scrollTop=e.offsetTop)},I=()=>{ae.value.focus()},s=e=>{l.value=e;const a=V.value.find(ve=>ve.value===e);u.value=(a==null?void 0:a.label)||"",_.value=!1},o=()=>{s("")},c=e=>{r.value=e},x=()=>{r.value=""},E=()=>{!D.value&&!S.value&&(v.value=!0)},y=()=>{v.value=!1,_.value=!1,x(),p.value.scrollTop=0},n=e=>r.value===e||l.value===e?0:-1,q=i(()=>{if(!r.value)return null;const e=f.value.findIndex(a=>a.value===r.value);return K(e)}),R=i(()=>l.value!==""&&u.value===C.value&&!D.value&&!S.value),Oe=()=>{v.value||E(),l.value!==""?c(l.value):c($.value)},ke=()=>{const e=f.value.find(a=>a.label===u.value);u.value!==""&&e.value&&s(e.value),y()},Ie=()=>{v.value?(y(),x()):(E(),l.value!==""?(c(l.value),z(()=>{k(H.value)})):c($.value)),I()},xe=()=>{o(),x(),I()},we=e=>{c(e),h.value&&h.value.focus({preventScroll:!0})},Ce=e=>{s(e),y(),I()},Le=e=>{s(e),y(),I()},Be=e=>{if(!P.value){c(f.value[e+1].value);const a=A(r.value);k(a.value),h.value&&h.value.focus()}},$e=e=>{if(M.value)y(),x(),I();else{c(f.value[e-1].value);const a=A(r.value);k(a.value),h.value&&h.value.focus()}},qe=()=>{v.value&&(s(l.value),y(),x())},_e=e=>{s(e),y(),I()},Ee=()=>{s(l.value),y(),x(),I()},Re=()=>{v.value||E(),L.value&&(l.value?(c(l.value),z(()=>{H.value.focus(),k(H.value)})):(c($.value),z(()=>{h.value.focus(),k(h.value)})))},Te=()=>{v.value||E(),l.value?(c(l.value),z(()=>{k(H.value)})):r.value===""&&(c($.value),z(()=>{k(pe.value)}))};return Fe(te,()=>qe()),Ke("Escape",()=>{Ee()}),{activeDescendent:me,clearButtonIsVisible:R,componentElement:te,computedAssistiveHintId:Z,computedErrorMessageId:Q,computedHintId:ce,computedId:g,computedLabelId:de,computedListId:ee,filteredOptions:f,getListItemIdByIndex:K,handleClearInput:xe,handleClickOnInput:Te,handleClickOnListOption:_e,handleDownOnInput:Re,handleDownOnListOption:Be,handleEnterOnInput:ke,handleEnterOnListOption:Le,handleFilterOnInput:Oe,handleHoverOnListOption:we,handleListToggle:Ie,handleSpaceOnListOption:Ce,handleUpOnListOption:$e,highlightedOption:se(r),inputElement:ae,isDisabled:se(D),isOpen:se(v),isReadonly:se(S),listElement:p,listItemElements:B,listItemTabIndex:n,searchTerm:u,selectedOption:l,totalFilteredOptions:L}}const We=["id"],Xe=["id"],Ye=["id","required","disabled","readonly","aria-owns","aria-controls","aria-describedby","aria-expanded","aria-activedescendant"],Je={class:"usa-combo-box__clear-input__wrapper",tabindex:"-1"},Qe=["aria-label","disabled"],Ze={class:"usa-combo-box__toggle-list__wrapper",tabindex:"-1"},et=["aria-label","disabled"],tt=["id","aria-labelledby","hidden"],at=["id","aria-setsize","aria-posinset","aria-selected","tabindex","data-value","onClick","onKeydown","onMouseover"],st={key:1,class:"usa-combo-box__list-option--no-results"},nt={class:"usa-combo-box__status usa-sr-only",role:"status"},lt=["id"],ot={inheritAttrs:!1},it=Object.assign(ot,{__name:"UsaComboBox",props:{options:{type:Array,default:()=>[]},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},id:{type:String,default:""},clearButtonAriaLabel:{type:String,default:"Clear the select contents"},toggleButtonAriaLabel:{type:String,default:"Toggle the dropdown list"},customClasses:{type:Object,default:()=>({formGroup:[],component:[],label:[],input:[],list:[]})}},emits:["update:modelValue"],setup(d,{emit:oe}){const Y=Ve(),ie=oe,m=d,{activeDescendent:re,clearButtonIsVisible:ue,componentElement:V,computedAssistiveHintId:D,computedErrorMessageId:S,computedHintId:l,computedId:J,computedLabelId:_,computedListId:u,filteredOptions:r,getListItemIdByIndex:v,handleClearInput:C,handleClickOnInput:f,handleClickOnListOption:L,handleDownOnInput:g,handleDownOnListOption:de,handleEnterOnInput:Q,handleEnterOnListOption:ce,handleFilterOnInput:Z,handleHoverOnListOption:ee,handleListToggle:K,handleSpaceOnListOption:te,handleUpOnListOption:ae,highlightedOption:p,inputElement:B,isOpen:U,isDisabled:A,isReadonly:$,listElement:pe,listItemElements:H,listItemTabIndex:h,searchTerm:M,selectedOption:P,totalFilteredOptions:me}=Ge(G(m,"id"),G(m,"modelValue"),G(m,"options"),G(m,"disabled"),G(m,"readonly"),ie),k=i(()=>{const s=[D.value];return Y.hint&&s.push(l.value),m.error&&Y["error-message"]&&s.push(S.value),s.join(" ")}),I=i(()=>{var s;return[{"usa-combo-box--pristine":P.value!==""},...((s=m.customClasses)==null?void 0:s.component)||[]]});return(s,o)=>{var c;return w(),ye(t(Pe),{group:!!s.$slots.hint||d.error&&!!s.$slots["error-message"],error:d.error,class:W((c=m.customClasses)==null?void 0:c.formGroup)},{default:ge(()=>{var x,E,y;return[d.label||s.$slots.label?(w(),ye(t(ze),{key:0,id:t(_),for:t(J),required:d.required,error:d.error,class:W((x=d.customClasses)==null?void 0:x.label)},{default:ge(()=>[N(s.$slots,"label",{},()=>[X(le(d.label),1)])]),_:3},8,["id","for","required","error","class"])):ne("",!0),s.$slots.hint?(w(),T("span",{key:1,id:t(l),class:"usa-hint"},[N(s.$slots,"hint")],8,We)):ne("",!0),d.error&&s.$slots["error-message"]?(w(),T("span",{key:2,id:t(S),class:"usa-error-message"},[N(s.$slots,"error-message")],8,Xe)):ne("",!0),O("div",{ref_key:"componentElement",ref:V,class:W(["usa-combo-box",I.value]),"data-enhanced":"true"},[he(O("input",De(s.$attrs,{id:t(J),ref_key:"inputElement",ref:B,"onUpdate:modelValue":o[0]||(o[0]=n=>Se(M)?M.value=n:null),required:d.required,disabled:t(A),readonly:t($),"aria-owns":t(u),"aria-controls":t(u),"aria-describedby":k.value,"aria-expanded":t(U),"aria-activedescendant":t(re),"aria-autocomplete":"list",autocapitalize:"off",autocomplete:"off",class:["usa-combo-box__input",(E=m.customClasses)==null?void 0:E.input],type:"text",role:"combobox",onClick:o[1]||(o[1]=(...n)=>t(f)&&t(f)(...n)),onInput:o[2]||(o[2]=(...n)=>t(Z)&&t(Z)(...n)),onKeydown:[o[3]||(o[3]=j(F((...n)=>t(Q)&&t(Q)(...n),["prevent"]),["enter"])),o[4]||(o[4]=j(F((...n)=>t(g)&&t(g)(...n),["prevent"]),["down"]))]}),null,16,Ye),[[Ae,t(M)]]),O("span",Je,[he(O("button",{type:"button",class:"usa-combo-box__clear-input","aria-label":d.clearButtonAriaLabel,disabled:t(A)||t($),onClick:o[5]||(o[5]=(...n)=>t(C)&&t(C)(...n))}," ",8,Qe),[[He,t(ue)]])]),o[9]||(o[9]=O("span",{class:"usa-combo-box__input-button-separator"}," ",-1)),O("span",Ze,[O("button",{type:"button",tabindex:"-1",class:"usa-combo-box__toggle-list","aria-label":d.toggleButtonAriaLabel,disabled:t(A)||t($),onClick:o[6]||(o[6]=(...n)=>t(K)&&t(K)(...n))}," ",8,et)]),O("ul",{id:t(u),ref_key:"listElement",ref:pe,tabindex:"-1",class:W(["usa-combo-box__list",(y=m.customClasses)==null?void 0:y.list]),role:"listbox","aria-labelledby":t(_),hidden:!t(U)},[t(r).length?(w(!0),T(fe,{key:0},Ne(t(r),(n,q)=>(w(),T("li",{id:t(v)(q),ref_for:!0,ref_key:"listItemElements",ref:H,key:n.value,"aria-setsize":t(me),"aria-posinset":q+1,"aria-selected":t(P)===n.value,class:W(["usa-combo-box__list-option",[{"usa-combo-box__list-option--selected":t(P)===n.value,"usa-combo-box__list-option--focused":t(p)===n.value}]]),tabindex:t(h)(n.value),role:"option","data-value":n.value,onClick:R=>t(L)(n.value),onKeydown:[j(F(R=>t(ae)(q),["prevent"]),["up"]),j(F(R=>t(de)(q),["prevent"]),["down"]),j(F(R=>t(ce)(n.value),["prevent"]),["enter"]),j(F(R=>t(te)(n.value),["prevent"]),["space"])],onMouseover:R=>t(ee)(n.value)},le(n.label),43,at))),128)):(w(),T("li",st,[N(s.$slots,"no-results",{},()=>[o[7]||(o[7]=X("No results found"))])]))],10,tt),O("div",nt,[t(U)?N(s.$slots,"status",{key:0,filteredOptions:t(r)},()=>[t(r).length?(w(),T(fe,{key:0},[X(le(t(r).length)+" "+le(t(r).length>1?"results":"result")+" available.",1)],64)):(w(),T(fe,{key:1},[X("No results.")],64))]):ne("",!0)]),O("span",{id:t(D),class:"usa-sr-only"},[N(s.$slots,"assistive-hint",{},()=>[o[8]||(o[8]=X("When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures."))])],8,lt)],2)]}),_:3},8,["group","error","class"])}}});it.__docgenInfo={exportName:"default",displayName:"UsaComboBox",type:1,props:[{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void"}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"error",global:!1,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"false"},{name:"required",global:!1,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"false"},{name:"id",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:'""'},{name:"label",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:'""'},{name:"customClasses",global:!1,description:"",tags:[],required:!1,type:"Record<string, any>",declarations:[],schema:"Record<string, any>",default:`() => {
    return {
        formGroup: [],
        component: [],
        label: [],
        input: [],
        list: [],
    };
}`},{name:"disabled",global:!1,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"false"},{name:"modelValue",global:!1,description:"",tags:[],required:!1,type:"string | number",declarations:[],schema:{kind:"enum",type:"string | number",schema:["string","number"]},default:'""'},{name:"options",global:!1,description:"",tags:[],required:!1,type:"unknown[]",declarations:[],schema:{kind:"array",type:"unknown[]"},default:"[]"},{name:"readonly",global:!1,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"false"},{name:"clearButtonAriaLabel",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:'"Clear the select contents"'},{name:"toggleButtonAriaLabel",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:'"Toggle the dropdown list"'}],events:[{name:"update:modelValue",description:"",tags:[],type:"any[]",signature:'(event: "update:modelValue", ...args: any[]): void',declarations:[],schema:["any"]}],slots:[{name:"label",type:"{}",description:"",declarations:[],schema:{kind:"object",type:"{}"}},{name:"hint",type:"{}",description:"",declarations:[],schema:{kind:"object",type:"{}"}},{name:"error-message",type:"{}",description:"",declarations:[],schema:{kind:"object",type:"{}"}},{name:"no-results",type:"{}",description:"",declarations:[],schema:{kind:"object",type:"{}"}},{name:"status",type:"{ filteredOptions: any; }",description:"",declarations:[],schema:{kind:"object",type:"{ filteredOptions: any; }"}},{name:"assistive-hint",type:"{}",description:"",declarations:[],schema:{kind:"object",type:"{}"}}],exposed:[{name:"error",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"required",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"id",type:"string",description:"",declarations:[],schema:"string"},{name:"label",type:"string",description:"",declarations:[],schema:"string"},{name:"customClasses",type:"Record<string, any>",description:"",declarations:[],schema:"Record<string, any>"},{name:"disabled",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"modelValue",type:"string | number",description:"",declarations:[],schema:{kind:"enum",type:"string | number",schema:["string","number"]}},{name:"options",type:"unknown[]",description:"",declarations:[],schema:{kind:"array",type:"unknown[]"}},{name:"readonly",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"clearButtonAriaLabel",type:"string",description:"",declarations:[],schema:"string"},{name:"toggleButtonAriaLabel",type:"string",description:"",declarations:[],schema:"string"}],sourceFiles:"/home/runner/work/vue-uswds/vue-uswds/src/components/UsaComboBox/UsaComboBox.vue"};export{it as _};
