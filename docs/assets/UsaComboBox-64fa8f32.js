import{l as b,s as i,w as be,V as se,W as P,u as Ae,M as z,f as ye,g as ge,n as W,b as t,o as w,r as H,d as X,v as ne,t as le,c as _,a as O,A as he,C as Se,m as De,X as Ue,j,k as N,O as He,H as je,G as fe}from"./vue.esm-bundler-2e7cedae.js";import{d as Ne,a as Fe,o as Ke}from"./index-2ecd98da.js";import{n as Me}from"./unique-id-a1cb1937.js";import{e as Ge}from"./common-c0b90c12.js";import{U as Pe}from"./UsaFormGroup-0035569d.js";import{U as ze}from"./UsaLabel-818695ec.js";function We(d,oe,J,ie,m,re){const ue=b(d),V=b(J),A=b(ie),S=b(m),l=i({get(){return oe.value},set(e){re("update:modelValue",e)}}),Q=Ne(),E=b(!1),u=b(""),r=b(""),v=b(!1),C=i(()=>{if(l.value==="")return"";const e=V.value.find(a=>a.value===l.value);return(e==null?void 0:e.label)||""});be(C,e=>{e!==""&&(u.value=e)}),be(u,e=>{v.value&&e!==""&&(E.value=!0)}),C.value&&(u.value=C.value);const f=i(()=>u.value===""||!E.value&&u.value===C.value?V.value:V.value.filter(e=>new RegExp(Ge(u.value),"gi").test(e.label))),L=i(()=>{var e;return(e=f.value)==null?void 0:e.length}),g=i(()=>ue.value||Me("usa-combo-box")),de=i(()=>`${g.value}-label`),Y=i(()=>`${g.value}-error-message`),ce=i(()=>`${g.value}-hint`),Z=i(()=>`${g.value}-assistive-hint`),ee=i(()=>`${g.value}-list`),F=e=>`${ee.value}-option-${e}`,te=b(null),ae=b(null),p=b(null),B=b([]),K=e=>B.value.find(a=>a.id===e),D=e=>B.value.find(a=>a.dataset.value===e),q=i(()=>L.value?f.value[0].value:""),pe=i(()=>{const e=L.value?B.value[0].id:null;return e?K(e):null}),U=i(()=>{if(l.value==="")return null;const e=B.value.find(a=>a.dataset.value===l.value);return e||null}),h=i(()=>{if(r.value==="")return null;const e=B.value.find(a=>a.dataset.value===r.value);return e||null}),M=i(()=>f.value.findIndex(a=>a.value===r.value)===0),G=i(()=>f.value.findIndex(a=>a.value===r.value)===L.value-1),me=i(()=>{const e=Q.value.id;return e===$.value||L.value&&l.value!==""&&v.value&&e===g.value?$.value:null}),k=e=>{if(!e||!(p!=null&&p.value))return;const a=e.offsetTop+e.offsetHeight,ve=p.value.scrollTop+p.value.offsetHeight;a>ve&&(p.value.scrollTop=a-p.value.offsetHeight),e.offsetTop<p.value.scrollTop&&(p.value.scrollTop=e.offsetTop)},I=()=>{ae.value.focus()},s=e=>{l.value=e;const a=V.value.find(ve=>ve.value===e);u.value=(a==null?void 0:a.label)||"",E.value=!1},o=()=>{s("")},c=e=>{r.value=e},x=()=>{r.value=""},R=()=>{!A.value&&!S.value&&(v.value=!0)},y=()=>{v.value=!1,E.value=!1,x(),p.value.scrollTop=0},n=e=>r.value===e||l.value===e?0:-1,$=i(()=>{if(!r.value)return null;const e=f.value.findIndex(a=>a.value===r.value);return F(e)}),T=i(()=>l.value!==""&&u.value===C.value&&!A.value&&!S.value),ke=()=>{v.value||R(),l.value!==""?c(l.value):c(q.value)},Ie=()=>{const e=f.value.find(a=>a.label===u.value);u.value!==""&&e.value&&s(e.value),y()},xe=()=>{v.value?(y(),x()):(R(),l.value!==""?(c(l.value),P(()=>{k(U.value)})):c(q.value)),I()},we=()=>{o(),x(),I()},Ce=e=>{c(e),h.value&&h.value.focus({preventScroll:!0})},Le=e=>{s(e),y(),I()},Be=e=>{s(e),y(),I()},qe=e=>{if(!G.value){c(f.value[e+1].value);const a=D(r.value);k(a.value),h.value&&h.value.focus()}},$e=e=>{if(M.value)y(),x(),I();else{c(f.value[e-1].value);const a=D(r.value);k(a.value),h.value&&h.value.focus()}},Ee=()=>{v.value&&(s(l.value),y(),x())},Re=e=>{s(e),y(),I()},Te=()=>{s(l.value),y(),x(),I()},_e=()=>{v.value||R(),L.value&&(l.value?(c(l.value),P(()=>{U.value.focus(),k(U.value)})):(c(q.value),P(()=>{h.value.focus(),k(h.value)})))},Ve=()=>{v.value||R(),l.value?(c(l.value),P(()=>{k(U.value)})):r.value===""&&(c(q.value),P(()=>{k(pe.value)}))};return Fe(te,()=>Ee()),Ke("Escape",()=>{Te()}),{activeDescendent:me,clearButtonIsVisible:T,componentElement:te,computedAssistiveHintId:Z,computedErrorMessageId:Y,computedHintId:ce,computedId:g,computedLabelId:de,computedListId:ee,filteredOptions:f,getListItemIdByIndex:F,handleClearInput:we,handleClickOnInput:Ve,handleClickOnListOption:Re,handleDownOnInput:_e,handleDownOnListOption:qe,handleEnterOnInput:Ie,handleEnterOnListOption:Be,handleFilterOnInput:ke,handleHoverOnListOption:Ce,handleListToggle:xe,handleSpaceOnListOption:Le,handleUpOnListOption:$e,highlightedOption:se(r),inputElement:ae,isDisabled:se(A),isOpen:se(v),isReadonly:se(S),listElement:p,listItemElements:B,listItemTabIndex:n,searchTerm:u,selectedOption:l,totalFilteredOptions:L}}const Xe=["id"],Je=["id"],Qe=["id","required","disabled","readonly","aria-owns","aria-controls","aria-describedby","aria-expanded","aria-activedescendant"],Ye={class:"usa-combo-box__clear-input__wrapper",tabindex:"-1"},Ze=["aria-label","disabled"],et={class:"usa-combo-box__toggle-list__wrapper",tabindex:"-1"},tt=["aria-label","disabled"],at=["id","aria-labelledby","hidden"],st=["id","aria-setsize","aria-posinset","aria-selected","tabindex","data-value","onClick","onKeydown","onMouseover"],nt={key:1,class:"usa-combo-box__list-option--no-results"},lt={class:"usa-combo-box__status usa-sr-only",role:"status"},ot=["id"],it={inheritAttrs:!1},Oe=Object.assign(it,{__name:"UsaComboBox",props:{options:{type:Array,default:()=>[]},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},id:{type:String,default:""},clearButtonAriaLabel:{type:String,default:"Clear the select contents"},toggleButtonAriaLabel:{type:String,default:"Toggle the dropdown list"},customClasses:{type:Object,default:()=>({formGroup:[],component:[],label:[],input:[],list:[]})}},emits:["update:modelValue"],setup(d,{emit:oe}){const J=Ae(),ie=oe,m=d,{activeDescendent:re,clearButtonIsVisible:ue,componentElement:V,computedAssistiveHintId:A,computedErrorMessageId:S,computedHintId:l,computedId:Q,computedLabelId:E,computedListId:u,filteredOptions:r,getListItemIdByIndex:v,handleClearInput:C,handleClickOnInput:f,handleClickOnListOption:L,handleDownOnInput:g,handleDownOnListOption:de,handleEnterOnInput:Y,handleEnterOnListOption:ce,handleFilterOnInput:Z,handleHoverOnListOption:ee,handleListToggle:F,handleSpaceOnListOption:te,handleUpOnListOption:ae,highlightedOption:p,inputElement:B,isOpen:K,isDisabled:D,isReadonly:q,listElement:pe,listItemElements:U,listItemTabIndex:h,searchTerm:M,selectedOption:G,totalFilteredOptions:me}=We(z(m,"id"),z(m,"modelValue"),z(m,"options"),z(m,"disabled"),z(m,"readonly"),ie),k=i(()=>{const s=[A.value];return J.hint&&s.push(l.value),m.error&&J["error-message"]&&s.push(S.value),s.join(" ")}),I=i(()=>{var s;return[{"usa-combo-box--pristine":G.value!==""},...((s=m.customClasses)==null?void 0:s.component)||[]]});return(s,o)=>{var c;return w(),ye(t(Pe),{group:!!s.$slots.hint||d.error&&!!s.$slots["error-message"],error:d.error,class:W((c=m.customClasses)==null?void 0:c.formGroup)},{default:ge(()=>{var x,R,y;return[d.label||s.$slots.label?(w(),ye(t(ze),{key:0,id:t(E),for:t(Q),required:d.required,error:d.error,class:W((x=d.customClasses)==null?void 0:x.label)},{default:ge(()=>[H(s.$slots,"label",{},()=>[X(ne(d.label),1)])]),_:3},8,["id","for","required","error","class"])):le("",!0),s.$slots.hint?(w(),_("span",{key:1,id:t(l),class:"usa-hint"},[H(s.$slots,"hint")],8,Xe)):le("",!0),d.error&&s.$slots["error-message"]?(w(),_("span",{key:2,id:t(S),class:"usa-error-message"},[H(s.$slots,"error-message")],8,Je)):le("",!0),O("div",{ref_key:"componentElement",ref:V,class:W(["usa-combo-box",I.value]),"data-enhanced":"true"},[he(O("input",De(s.$attrs,{id:t(Q),ref_key:"inputElement",ref:B,"onUpdate:modelValue":o[0]||(o[0]=n=>Ue(M)?M.value=n:null),required:d.required,disabled:t(D),readonly:t(q),"aria-owns":t(u),"aria-controls":t(u),"aria-describedby":k.value,"aria-expanded":t(K),"aria-activedescendant":t(re),"aria-autocomplete":"list",autocapitalize:"off",autocomplete:"off",class:["usa-combo-box__input",(R=m.customClasses)==null?void 0:R.input],type:"text",role:"combobox",onClick:o[1]||(o[1]=(...n)=>t(f)&&t(f)(...n)),onInput:o[2]||(o[2]=(...n)=>t(Z)&&t(Z)(...n)),onKeydown:[o[3]||(o[3]=j(N((...n)=>t(Y)&&t(Y)(...n),["prevent"]),["enter"])),o[4]||(o[4]=j(N((...n)=>t(g)&&t(g)(...n),["prevent"]),["down"]))]}),null,16,Qe),[[Se,t(M)]]),O("span",Ye,[he(O("button",{type:"button",class:"usa-combo-box__clear-input","aria-label":d.clearButtonAriaLabel,disabled:t(D)||t(q),onClick:o[5]||(o[5]=(...n)=>t(C)&&t(C)(...n))}," ",8,Ze),[[He,t(ue)]])]),o[9]||(o[9]=O("span",{class:"usa-combo-box__input-button-separator"}," ",-1)),O("span",et,[O("button",{type:"button",tabindex:"-1",class:"usa-combo-box__toggle-list","aria-label":d.toggleButtonAriaLabel,disabled:t(D)||t(q),onClick:o[6]||(o[6]=(...n)=>t(F)&&t(F)(...n))}," ",8,tt)]),O("ul",{id:t(u),ref_key:"listElement",ref:pe,tabindex:"-1",class:W(["usa-combo-box__list",(y=m.customClasses)==null?void 0:y.list]),role:"listbox","aria-labelledby":t(E),hidden:!t(K)},[t(r).length?(w(!0),_(fe,{key:0},je(t(r),(n,$)=>(w(),_("li",{id:t(v)($),ref_for:!0,ref_key:"listItemElements",ref:U,key:n.value,"aria-setsize":t(me),"aria-posinset":$+1,"aria-selected":t(G)===n.value,class:W(["usa-combo-box__list-option",[{"usa-combo-box__list-option--selected":t(G)===n.value,"usa-combo-box__list-option--focused":t(p)===n.value}]]),tabindex:t(h)(n.value),role:"option","data-value":n.value,onClick:T=>t(L)(n.value),onKeydown:[j(N(T=>t(ae)($),["prevent"]),["up"]),j(N(T=>t(de)($),["prevent"]),["down"]),j(N(T=>t(ce)(n.value),["prevent"]),["enter"]),j(N(T=>t(te)(n.value),["prevent"]),["space"])],onMouseover:T=>t(ee)(n.value)},ne(n.label),43,st))),128)):(w(),_("li",nt,[H(s.$slots,"no-results",{},()=>[o[7]||(o[7]=X("No results found"))])]))],10,at),O("div",lt,[t(K)?H(s.$slots,"status",{key:0,filteredOptions:t(r)},()=>[t(r).length?(w(),_(fe,{key:0},[X(ne(t(r).length)+" "+ne(t(r).length>1?"results":"result")+" available.",1)],64)):(w(),_(fe,{key:1},[X("No results.")],64))]):le("",!0)]),O("span",{id:t(A),class:"usa-sr-only"},[H(s.$slots,"assistive-hint",{},()=>[o[8]||(o[8]=X("When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures."))])],8,ot)],2)]}),_:3},8,["group","error","class"])}}}),vt=Oe;Oe.__docgenInfo={exportName:"default",displayName:"UsaComboBox",type:1,props:[{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void"}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"error",global:!1,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"false"},{name:"required",global:!1,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"false"},{name:"id",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:'""'},{name:"label",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:'""'},{name:"customClasses",global:!1,description:"",tags:[],required:!1,type:"Record<string, any>",declarations:[],schema:"Record<string, any>",default:`() => {
    return {
        formGroup: [],
        component: [],
        label: [],
        input: [],
        list: [],
    };
}`},{name:"disabled",global:!1,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"false"},{name:"modelValue",global:!1,description:"",tags:[],required:!1,type:"string | number",declarations:[],schema:{kind:"enum",type:"string | number",schema:["string","number"]},default:'""'},{name:"options",global:!1,description:"",tags:[],required:!1,type:"unknown[]",declarations:[],schema:{kind:"array",type:"unknown[]"},default:"[]"},{name:"readonly",global:!1,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"false"},{name:"clearButtonAriaLabel",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:'"Clear the select contents"'},{name:"toggleButtonAriaLabel",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:'"Toggle the dropdown list"'}],events:[{name:"update:modelValue",description:"",tags:[],type:"any[]",signature:'(event: "update:modelValue", ...args: any[]): void',declarations:[],schema:["any"]}],slots:[{name:"label",type:"{}",description:"",declarations:[],schema:{kind:"object",type:"{}"}},{name:"hint",type:"{}",description:"",declarations:[],schema:{kind:"object",type:"{}"}},{name:"error-message",type:"{}",description:"",declarations:[],schema:{kind:"object",type:"{}"}},{name:"no-results",type:"{}",description:"",declarations:[],schema:{kind:"object",type:"{}"}},{name:"status",type:"{ filteredOptions: any; }",description:"",declarations:[],schema:{kind:"object",type:"{ filteredOptions: any; }"}},{name:"assistive-hint",type:"{}",description:"",declarations:[],schema:{kind:"object",type:"{}"}}],exposed:[{name:"error",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"required",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"id",type:"string",description:"",declarations:[],schema:"string"},{name:"label",type:"string",description:"",declarations:[],schema:"string"},{name:"customClasses",type:"Record<string, any>",description:"",declarations:[],schema:"Record<string, any>"},{name:"disabled",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"modelValue",type:"string | number",description:"",declarations:[],schema:{kind:"enum",type:"string | number",schema:["string","number"]}},{name:"options",type:"unknown[]",description:"",declarations:[],schema:{kind:"array",type:"unknown[]"}},{name:"readonly",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"clearButtonAriaLabel",type:"string",description:"",declarations:[],schema:"string"},{name:"toggleButtonAriaLabel",type:"string",description:"",declarations:[],schema:"string"}],sourceFiles:"/home/runner/work/vue-uswds/vue-uswds/src/components/UsaComboBox/UsaComboBox.vue"};export{vt as U};
