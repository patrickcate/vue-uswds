import{s as l,l as q,K as te,w as P,M as j,y as ne,z as re,c as C,a as u,b as G,G as Q,H as X,o as $,n as se,j as b,k as g,v as le,W as Z}from"./vue.esm-bundler-2e7cedae.js";import{u as ie}from"./useFocusTrap-1f496824.js";import{Y as B}from"./constants-fce87d39.js";import{b as T,p as N,k as oe}from"./dates-8ec2f460.js";import{s as ue}from"./common-c0b90c12.js";const de=({minDate:D,maxDate:V,activeYear:d})=>{const y=l(()=>T(N(D.value))),S=l(()=>T(N(V.value))),s=t=>t>=y.value&&t<=S.value,U=(t,a)=>{for(let r=t;r<=a;r++)if(s(r))return r;return null},A=(t,a)=>{for(let r=t;r>=a;r--)if(s(r))return r;return null},x=l(()=>Math.max(0,d.value-d.value%B)),i=l(()=>{const t=[];let a=x.value;for(;t.length<B;)t.push(a),a+=1;return t}),v=l(()=>ue(i.value,3)),w=l(()=>v.value.map(t=>t.map((a,r)=>({year:a,id:`${a}-${r}`,disabled:!s(a),left:s(a-1)?a-1:null,right:s(a+1)?a+1:null,up:s(a-3)?a-3:null,down:s(a+3)?a+3:null,home:t.find(f=>s(f))||null,end:[...t].reverse().find(f=>s(f))||null,pageUp:U(a-B,a),pageDown:A(a+B,a)})))),Y=l(()=>i.value[0]),_=l(()=>i.value[i.value.length-1]),O=l(()=>s(Y.value-1)),E=l(()=>s(_.value+1)),F=l(()=>U(Y.value,_.value)),I=l(()=>A(_.value,Y.value));return{years:w,visibleYearRange:i,firstAvailableVisibleYear:F,lastAvailableVisibleYear:I,isYearAvailable:t=>t>=F.value&&t<=I.value,hasPastYear:O,hasFutureYear:E,findRowIndexByYear:(t,a)=>t.value.findIndex(f=>f.find(({year:h})=>h===a)),findButtonIndexByYear:(t,a,r)=>t.value[a].findIndex(({year:h})=>h===r)}},ce={class:"usa-date-picker__calendar__table"},pe=["aria-label","disabled"],ve={colspan:"3"},me={class:"usa-date-picker__calendar__table",role:"presentation"},fe=["disabled","tabindex","data-value","aria-selected","onClick","onMouseover","onKeydown"],be=["aria-label","disabled"],H={__name:"UsaDatePickerCalendarYear",props:{selectedYear:{type:Number,required:!0},activeDate:{type:String,required:!0},minDate:{type:String,required:!0},maxDate:{type:String,required:!0},previousYearsButtonLabel:{type:String,required:!0},nextYearsButtonLabel:{type:String,required:!0}},emits:["update:selectedYear","update:selectorMode","update:activeYearStart","update:activeYearEnd"],setup(D,{emit:V}){const d=V,y=D,S=q(null),s=q([]),{activate:U,deactivate:A}=ie(S,{immediate:!0,clickOutsideDeactivates:!0,initialFocus:".usa-date-picker__calendar__year--focused",fallbackFocus:".usa-date-picker__calendar__date-picker"}),x=te(N(y.activeDate));P(j(y,"activeDate"),e=>x.value=N(e));const i=l({get(){return T(x.value)},set(e){x.value=oe(x.value,e)}}),{years:v,visibleYearRange:w,firstAvailableVisibleYear:Y,lastAvailableVisibleYear:_,isYearAvailable:O,hasPastYear:E,hasFutureYear:F,findRowIndexByYear:I,findButtonIndexByYear:K}=de({minDate:j(y,"minDate"),maxDate:j(y,"maxDate"),activeYear:i});P(Y,()=>d("update:activeYearStart",Y.value),{immediate:!0}),P(_,()=>d("update:activeYearEnd",_.value),{immediate:!0});const R=l({get(){return y.selectedYear},set(e){d("update:selectedYear",e)}}),m=q(i.value),t=q(null),a=q(null),r=(e,o,c)=>e===m.value||e===R.value||t.value===o&&a.value===c?0:-1,f=e=>s.value.find(o=>parseInt(o.dataset.value,10)===e),h=e=>{const o=f(e);o&&o.focus()},z=()=>{i.value=i.value-B},W=()=>{i.value=i.value+B},ee=e=>{R.value=e,d("update:selectorMode","day")},ae=e=>{m.value=e,h(m.value)},L=e=>{e&&(w.value.includes(e)||z(),Z(()=>{m.value=e,h(e)}))},M=e=>{e&&(w.value.includes(e)||W(),Z(()=>{m.value=e,h(e)}))};return P(m,e=>{if(w.value.includes(e)&&O(e)){const o=I(v,e),c=K(v,o,e);t.value=o,a.value=c}},{immediate:!0}),P(v,(e,o)=>{if(e[t.value][a.value].disabled){const c=e[0][0].year<o[0][0].year?Y.value:_.value,k=I(v,c);if(k===-1)return;const n=K(v,k,c);m.value=e[k][n].year}}),ne(()=>{U()}),re(()=>{d("update:activeYearStart",""),d("update:activeYearEnd",""),A()}),(e,o)=>($(),C("div",{ref_key:"yearDatePickerRef",ref:S,tabindex:"-1",class:"usa-date-picker__calendar__year-picker"},[u("table",ce,[u("tbody",null,[u("tr",null,[u("td",null,[u("button",{type:"button",class:"usa-date-picker__calendar__previous-year-chunk","aria-label":D.previousYearsButtonLabel,disabled:!G(E),onClick:z}," ",8,pe)]),u("td",ve,[u("table",me,[u("tbody",null,[($(!0),C(Q,null,X(G(v),(c,k)=>($(),C("tr",{key:`${k}-${c.map(({year:n})=>n).join("-")}`},[($(!0),C(Q,null,X(c,(n,J)=>($(),C("td",{key:n.id},[u("button",{ref_for:!0,ref_key:"yearButtonRefs",ref:s,type:"button",disabled:n.disabled,tabindex:r(n.year,k,J),class:se(["usa-date-picker__calendar__year",{"usa-date-picker__calendar__year--selected":R.value===n.year,"usa-date-picker__calendar__year--focused":t.value===k&&a.value===J}]),"data-value":n.year,"aria-selected":R.value===n.year,onClick:p=>ee(n.year),onMouseover:p=>ae(n.year),onKeydown:[b(g(p=>L(n.up),["prevent"]),["up"]),b(g(p=>M(n.down),["prevent"]),["down"]),b(g(p=>L(n.left),["prevent"]),["left"]),b(g(p=>M(n.right),["prevent"]),["right"]),b(g(p=>L(n.home),["prevent"]),["home"]),b(g(p=>M(n.end),["prevent"]),["end"]),b(g(p=>L(n.pageUp),["prevent"]),["page-up"]),b(g(p=>M(n.pageDown),["prevent"]),["page-down"])]},le(n.year),43,fe)]))),128))]))),128))])])]),u("td",null,[u("button",{type:"button",class:"usa-date-picker__calendar__next-year-chunk","aria-label":D.nextYearsButtonLabel,disabled:!G(F),onClick:W}," ",8,be)])])])])],512))}},ke=H;H.__docgenInfo={exportName:"default",displayName:"UsaDatePickerCalendarYear",type:1,props:[{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void"}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"minDate",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"},{name:"maxDate",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"},{name:"previousYearsButtonLabel",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"},{name:"nextYearsButtonLabel",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"},{name:"activeDate",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"},{name:"selectedYear",global:!1,description:"",tags:[],required:!0,type:"number",declarations:[],schema:"number"}],events:[],slots:[],exposed:[{name:"minDate",type:"string",description:"",declarations:[],schema:"string"},{name:"maxDate",type:"string",description:"",declarations:[],schema:"string"},{name:"previousYearsButtonLabel",type:"string",description:"",declarations:[],schema:"string"},{name:"nextYearsButtonLabel",type:"string",description:"",declarations:[],schema:"string"},{name:"activeDate",type:"string",description:"",declarations:[],schema:"string"},{name:"selectedYear",type:"number",description:"",declarations:[],schema:"number"}],sourceFiles:"/home/runner/work/vue-uswds/vue-uswds/src/components/UsaDatePickerCalendarYear/UsaDatePickerCalendarYear.vue"};export{ke as U};
